#!/usr/bin/env python
# -*- Mode: Python; indent-tabs-mode: nil; tab-width: 2; coding: utf-8 -*-
#
# Setup a local backend, but just show the UI.  The user will interact with
# it and test manually.  Good for playing with the UI as you make changes,
# without futzing up your own gconf settings.

import base
import ldtp
import sys
import os

def test():
  version = None
  dest = None
  for arg in sys.argv[1:]:
    if arg == 'vfat':
      dest = base.create_mount(mtype='vfat')
    elif arg == 'ext3':
      dest = base.create_mount(mtype='ext3')
    else:
      version = arg
  
  if version is not None:
    os.environ['DEJA_DUP_TEST_VERSION'] = version
  
	base.setup()
	base.create_local_config(dest)
	
	# Let user play with it for a while, maximum 2 hours
	if ldtp.waittillguinotexist('frmDéjàDup', guiTimeOut=60*60*2) == 0:
		base.quit()

base.run(test)
